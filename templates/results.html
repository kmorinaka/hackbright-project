{% extends 'base.html' %}


{% block content %}
    <div class="container-fluid">
        <h1>Results:</h1>
        <br>
        <div class="container" id="clickme">
            <ul>
               {% for business in businesses %}
                <button action="/profile"
                data-name="{{ business['name'] }}"
                data-address="{{ business['address'] }}"
                data-city="{{ business['city'] }}"
                data-state="{{ business['state'] }}"
                data-zipcode="{{ business['zipcode'] }}"
                data-phone="{{ business['phone'] }}"
                data-categories="{{ business['categories'] }}"
                data-id="{{ business['id'] }}"
                data-yelp-url="{{ business['yelp_url'] }}"
                data-rating="{{ business['rating'] }}"
                data-url-rating-stars="{{ business['url_rating_stars'] }}"
                data-neighborhoods="{{ business['neighborhoods'] }}"
                data-cross-streets="{{ business['cross_streets'] }}"
                data-coordinates="{{ business['coordinates'] }}">
                    {{ business['name'] }}
                    </button>
               

                    <li>Address: {{ business['address'] }} {{ business['city'] }}, {{ business['state'] }} {{ business['zipcode'] }}</li>
                    <li>Phone number: {{ business['phone'] }}</li>
                    <li>Categories: {{ business['categories']}}</li>
                {% endfor %}
            </ul>
        </div>
   </div>
    <script> 
        //when they click on the business name, the function getProfile, gets the data from the data attributes
        $("button").on("click", function(evt) {
            // var businessName = $("#bname").data('name');
            // var address = $("#bname").data('address');
            // var city = $("#bname").data('city');
            // var state = $("#bname").data('state');
            // var zipcode = $("#bname").data('zipcode');
            // var phone = $("#bname").data('phone');
            // var categories = $("#bname").data('categories');
            // var id = $("#bname").data('id');
            // var yelpUrl = $("#bname").data('yelp-url');
            // var rating = $("#bname").data('rating');
            // var urlRatingStars = $("#bname").data('url-rating-stars');
            // var neighborhoods = $("#bname").data('neighborhoods');
            // var crossStreets = $("#bname").data('cross-streets');
            // var coordinates = $("#bname").data('coordinates');
            // all of the code above ^^ 
            // or this one line below vv
            var businessInfo = $(evt.currentTarget).data();
            console.log(businessInfo)
            alert('clicked!');
            $.post('/profile')
        });

        //data is saved in an object under the variable name businessInfo
 
    </script>
    <!--
    add data- attribute for each key in business dictionary

    in javascript attach a click event to the span with id bname
    event handler for that click even will be a get request to the /profile route

    image for business

    display business info
    link to yelp
    map?

    yelp html to display star ratings

        <i class="star-img stars_4_half" title="4.5 star rating">
            <img alt="4.5 star rating" class="offscreen" height="303" src="//s3-media4.fl.yelpcdn.com/assets/srv0/yelp_styleguide/c2252a4cd43e/assets/img/stars/stars_map.png" width="84">
        </i>
    
    -->
{% endblock %}
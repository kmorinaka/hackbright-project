{% extends 'base.html' %}

{% block head %}

<title>{{ user.username }}'s Profile</title>

<style>
        html, body {width: 100%; height: 100%}
        body {margin: 0; padding: 0; overflow:hidden;}
        #map, #map-container {height: 600px; margin: 0px;}
        #map-container {padding-top: 50px;}

        
    </style>

    <script src="https://maps.googleapis.com/maps/api/js"></script>
    <script src="https://code.jquery.com/jquery.js"></script>

<script>

 function initialize() {

        var map = new google.maps.Map(document.getElementById('map'), mapOptions)

        var mapOptions = {
              zoom: 12,
              center: new google.maps.LatLng({{ businesses[0].latitude }}, {{ businesses[0].longitude }})
            };

        map = new google.maps.Map(
            document.getElementById('map'),
            mapOptions);

        console.log('hello'); //debugging
     
        {% for business in businesses %}

            var myLatLng = new google.maps.LatLng({{ business.latitude }}, {{ business.longitude }});
            
            var marker = new google.maps.Marker({
                position: myLatLng,
                map: map
                // title: {{ business.name }} GOT AN ERROR FOR BI-RITE
             });

        {% endfor %}
        
    };

    google.maps.event.addDomListener(window, 'load', initialize);

</script>
{% endblock %}


{% block content %}
<div class="container-fluid"> 
    <div class="row">
      <div class="col-md-6">    
        <div class="userinfo">
            <h3><b>{{ user.username }}</b></h3>
            <p>You live in: {{ user.city }}, {{ user.state }}</p>
            <p>Email: {{ user.email }}</p>
        </div>
        <br><br>
        <div class="businesses">
            <h4><u>Your Saved Businesses:</u></h4>
            {% for business in businesses %}
              <ul>
                <p><b>{{ business.name }}</b></p>
                <li>{{ business.address }} {{ business.city }}, {{ business.state}}</li>
              </ul>  
            {% endfor %}
        </div>


      </div> <!-- closes container with userinfo and businesses -->

      <div class="col-md-6">
        <div id="map-container">
            <div id="map"></div>
        </div>
      </div>
    </div> <!-- closes row -->
</div>

{% endblock %}